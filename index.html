<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
    <title>FORVIA HUB - MASTER SHELL</title>

    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    
    <meta name="apple-mobile-web-app-title" content="Forvia Hub">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <style>
        :root {
            --bg: #0b1120; --card: #1e293b; --accent: #3b82f6;
            --text: #f3f4f6; --text-dim: #94a3b8; --border: #334155;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: #0f172a; color: var(--text);
            margin: 0; height: 100dvh; overflow: hidden;
            display: flex; flex-direction: column;
            padding-top: env(safe-area-inset-top); 
        }

        #content-frame {
            border: none; width: 100%; height: 100%;
            display: none; 
            background: #0f172a;
        }

        #home-screen {
            flex-grow: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
            background: radial-gradient(circle at top right, rgba(59, 130, 246, 0.15), transparent 40%),
            radial-gradient(circle at bottom left, rgba(16, 185, 129, 0.1), transparent 40%), #0b1120;
            padding: 20px; position: relative; width: 100%; height: 100%;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(12px); -webkit-backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            padding: 40px 30px; border-radius: 24px;
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.5);
            max-width: 500px; width: 100%; animation: fadeIn 0.8s ease-out;
            position: relative; 
        }

        /* --- MEGOSZT√ÅS GOMB (JOBB FELS≈ê) --- */
        .share-card-btn {
            position: absolute; top: 20px; right: 20px;
            width: 40px; height: 40px; border-radius: 50%;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(255, 255, 255, 0.1);
            color: var(--text-dim); display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.3s ease; z-index: 10;
            -webkit-tap-highlight-color: transparent; /* Mobilos villan√°s elt√ºntet√©se */
        }
        .share-card-btn:active {
            background: var(--accent); color: white; border-color: var(--accent);
            transform: scale(0.95);
        }

        .share-icon-svg { width: 20px; height: 20px; fill: currentColor; }

        .welcome-title {
            font-size: 2.2rem; font-weight: 800; margin: 0;
            color: white; letter-spacing: -1px; margin-bottom: 5px;
        }
        .highlight-blue { color: var(--accent); }

        .current-date {
            color: var(--text-dim); font-size: 0.95rem; margin-bottom: 25px; font-weight: 500; line-height: 1.4;
        }
        .nameday-text { color: var(--accent); font-weight: 600; display: block; margin-top: 4px; }

        .visitor-box {
            background: rgba(0,0,0,0.3); padding: 12px 20px; border-radius: 12px;
            display: inline-block; margin-bottom: 20px; border: 1px solid rgba(59, 130, 246, 0.3);
        }
        .visitor-label { font-size: 10px; text-transform: uppercase; color: var(--text-dim); letter-spacing: 1px; display: block; margin-bottom: 8px; }
        .visitor-img { height: 24px; }

        .instruction-text {
            font-size: 1rem; line-height: 1.6; color: #e2e8f0; margin-bottom: 30px;
        }
        .instruction-highlight { color: var(--accent); font-weight: 600; }

        .device-info {
            font-size: 0.8rem; color: #64748b;
            border-top: 1px solid rgba(255,255,255,0.1);
            padding-top: 20px; margin-top: 10px;
        }
        .good-luck {
            display: block; margin-top: 5px; color: #10b981; font-weight: 700; text-transform: uppercase; letter-spacing: 1px;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        /* --- H√çRS√ÅV ST√çLUS (JAV√çTOTT, AKAD√ÅSMENTES) --- */
        .ticker-wrap {
            position: fixed; bottom: 0; left: 0; width: 100%; overflow: hidden; height: 36px;
            /* Alap√©rtelmezett sz√≠n (K√©k) - JS fel√ºl√≠rja */
            background-color: rgba(15, 23, 42, 0.95); 
            border-top: 1px solid var(--accent);
            z-index: 1000; backdrop-filter: blur(5px);
            white-space: nowrap;
            transition: background-color 0.5s ease; 
        }
        .ticker-move {
            display: inline-block; height: 36px; line-height: 36px; white-space: nowrap;
            padding-left: 100%; /* Jobb oldalr√≥l indul */
            animation: ticker 35s linear infinite; /* Lass√≠tottam (30->35) a stabilit√°s√©rt */
            
            /* GPU GYORS√çT√ÅS BEKAPCSOL√ÅSA (AKAD√ÅS ELLEN) */
            will-change: transform;
            transform: translateZ(0); 
            -webkit-backface-visibility: hidden;
            backface-visibility: hidden;
        }
        .ticker-item {
            display: inline-block; padding: 0 2rem; font-size: 0.9rem; 
            color: #fbbf24;
            font-weight: 600; text-transform: uppercase; letter-spacing: 1px;
        }
        
        @keyframes ticker {
            0% { transform: translate3d(0, 0, 0); }
            100% { transform: translate3d(-100%, 0, 0); }
        }

        .sidebar {
            position: fixed; left: 0; top: 0;
            width: 280px; height: 100%; background: #111827;
            border-right: 1px solid var(--border);
            display: flex; flex-direction: column;
            transform: translateX(-100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 2000;
            padding-top: env(safe-area-inset-top);
        }
        .sidebar.open { transform: translateX(0); box-shadow: 20px 0 50px rgba(0,0,0,0.8); }

        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid var(--border);
            background: rgba(255,255,255,0.02);
        }
        .sidebar-header h2 {
            font-size: 1.3rem; margin: 0; letter-spacing: 1px; font-weight: 700;
        }

        .nav-list { padding: 20px; flex-grow: 1; overflow-y: auto; }

        .nav-item {
            display: flex; align-items: center; padding: 14px 15px;
            margin-bottom: 8px; border-radius: 12px; text-decoration: none;
            color: var(--text-dim); font-weight: 500; transition: background 0.1s; cursor: pointer;
            -webkit-tap-highlight-color: transparent; /* Mobilon ne legyen sz√ºrke h√°tt√©r √©rint√©skor */
        }
        .nav-item i { width: 30px; font-style: normal; text-align: center; font-size: 1.2rem; }
        
        @media (hover: hover) {
            .nav-item:hover { background: rgba(59, 130, 246, 0.2); color: white; }
        }
        .nav-item:active { background: var(--accent) !important; color: white !important; transform: scale(0.98); }

        .menu-fab {
            position: fixed; bottom: 30px; right: 30px;
            width: 60px; height: 60px; background: var(--accent);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.6);
            cursor: pointer; z-index: 2147483647; 
            border: 2px solid rgba(255,255,255,0.1);
            transition: transform 0.2s;
            -webkit-touch-callout: none; -webkit-user-select: none; user-select: none; outline: none; -webkit-tap-highlight-color: transparent;
        }
        .menu-fab:active { transform: scale(0.9); }
        .menu-fab span { font-size: 28px; color: white; line-height: 1; }

        .refresh-fab {
            position: fixed; bottom: 110px; right: 37px; width: 45px; height: 45px;
            background: rgba(30, 41, 59, 0.8); backdrop-filter: blur(5px);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer; z-index: 2147483647; border: 1px solid var(--border);
            transition: all 0.3s;
        }
        .refresh-fab:active { transform: rotate(180deg) scale(0.9); }
        .refresh-fab span { font-size: 22px; color: var(--accent); line-height: 1; font-weight: bold; }

        .overlay {
            display: none; position: fixed; inset: 0;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); z-index: 1500;
        }
        .overlay.active { display: block; }

        footer { padding: 20px; border-top: 1px solid var(--border); text-align: center; color: #64748b; font-size: 0.75rem; }
    </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<div id="home-screen">
    <div class="glass-card">
        <div class="share-card-btn" onclick="shareApp(this)" title="App megoszt√°sa">
            <svg class="share-icon-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
            </svg>
        </div>

        <h1 class="welcome-title">√údv <span class="highlight-blue">Felhaszn√°l√≥!</span></h1>
        <div id="display-date" class="current-date">
            <span id="date-text">0000. 00. 00.</span><br>
            <span id="name-day" class="nameday-text">...</span>
        </div>

        <div class="visitor-box">
            <span class="visitor-label">Mai l√°togat√°sok sz√°ma</span>
            <img id="hit-img" class="visitor-img" src="" alt="loading...">
        </div>

        <p class="instruction-text">
            Haszn√°ld a jobb oldalon l√©v≈ë <span class="instruction-highlight">men√ºgombot</span><br>
            a haszn√°lat megkezd√©s√©hez.
        </p>

        <div class="device-info">
            Ez a verzi√≥ laptop √©s telefon kijelz≈ëre lett optimaliz√°lva.
            <span class="good-luck">J√≥ munk√°t!</span>
        </div>
    </div>

    <div class="ticker-wrap">
        <div class="ticker-move">
            <div class="ticker-item">üì¢ FORVIA SMT APPLIK√ÅCI√ì INFORM√ÅCI√ìK: √údv√∂zl√ºnk a rendszerben!---Ossz√°tok meg egym√°s k√∂z√∂tt!---G√©pkezel≈ëk-Tecnikusok-M≈±szakvezet≈ëk-minden napos seg√≠t√©se az applik√°ci√≥ c√©lja! 2026</div>
        </div>
    </div>
</div>

<iframe id="content-frame" name="appFrame"></iframe>

<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <h2>
            <span style="color: white;">FORVIA</span>
            <span style="color: var(--accent);">SMT</span>
        </h2>
    </div>

    <nav class="nav-list">
        <div onclick="showHome(this)" class="nav-item"><i>üè†</i> Kezd≈ëlap</div>
        <div onclick="loadModule('1.html', false, this)" class="nav-item"><i>üîç</i> Alkatr√©sz Keres≈ë</div>
        <div onclick="loadModule('2.html', false, this)" class="nav-item"><i>üí∞</i> B√©rkalkul√°tor</div>
        <div onclick="loadModule('3.html', false, this)" class="nav-item"><i>üìÖ</i> M≈±szaknapt√°r</div>
        <div onclick="loadModule('4.html', false, this)" class="nav-item"><i>üìù</i> Napi Jelent√©s seg√©dlet</div>
        <div onclick="loadModule('5.html', false, this)" class="nav-item"><i>üé≠</i> Maszk keres≈ë</div>
        <div onclick="openSecureLink(this)" class="nav-item"><i>‚öôÔ∏è</i> Adatgener√°l√≥ üîê</div>
        <div onclick="loadModule('7.html', false, this)" class="nav-item"><i>üìä</i> Hiba Anal√≠zis</div>
        <div onclick="openStaffPro(this)" class="nav-item"><i>üë•</i> Szabads√°gok 2026 üîê</div>
        <div onclick="loadModule('9.html', false, this)" class="nav-item"><i>üì∑</i> Oper√°tori Barcode Scan </div>
    </nav>

    <footer>Szoftverfejleszt≈ë:<br><strong style="color:white">GERG≈ê ROLAND</strong><br>2026</footer>
</aside>

<div class="refresh-fab" onclick="window.location.reload()">
    <span>‚Üª</span>
</div>

<div class="menu-fab" id="menuFab" oncontextmenu="return false;">
    <span id="menuIcon">‚ò∞</span>
</div>

<script>
    // --- KONFIGUR√ÅCI√ì (Firebase URL) ---
    const DB_URL = "https://forviastaff-default-rtdb.firebaseio.com/"; 

    const nevnapok = {
        "01-01": "Alp√°r", "01-02": "√Åbel", "01-03": "Genov√©va, Benj√°min", "01-04": "Titusz, Leona", "01-05": "Simon", "01-06": "Boldizs√°r", "01-07": "Attila, Ram√≥na", "01-08": "Gy√∂ngyv√©r", "01-09": "Marcell", "01-10": "Mel√°nia", "01-11": "√Ågota", "01-12": "Ern≈ë", "01-13": "Veronika", "01-14": "B√≥dog", "01-15": "L√≥r√°nt, Lor√°nd", "01-16": "Guszt√°v", "01-17": "Antal, Ant√≥nia", "01-18": "Piroska", "01-19": "S√°ra, M√°ri√≥", "01-20": "F√°bi√°n, Sebesty√©n", "01-21": "√Ågnes", "01-22": "Vince", "01-23": "Zelma, Rajmund", "01-24": "Tim√≥t", "01-25": "P√°l", "01-26": "Vanda, Paula", "01-27": "Angelika", "01-28": "K√°roly, Karola", "01-29": "Ad√©l", "01-30": "Martina, Gerda", "01-31": "Marcella",
        "02-01": "Ign√°c", "02-02": "Karolina, Aida", "02-03": "Bal√°zs", "02-04": "R√°hel, Csenge", "02-05": "√Ågota, Ingrid", "02-06": "Dorottya, D√≥ra", "02-07": "T√≥dor, R√≥me√≥", "02-08": "Aranka", "02-09": "Abig√©l, Alex", "02-10": "Elvira", "02-11": "Bertold, Marietta", "02-12": "L√≠via, L√≠dia", "02-13": "Ella, Linda", "02-14": "B√°lint, Valentin", "02-15": "Kolos, Georgina", "02-16": "Julianna, Lilla", "02-17": "Don√°t", "02-18": "Bernadett", "02-19": "Zsuzsanna", "02-20": "Alad√°r, √Ålmos", "02-21": "Eleon√≥ra", "02-22": "Gerzson", "02-23": "Alfr√©d", "02-24": "M√°ty√°s", "02-25": "G√©za", "02-26": "Viktor, Gy≈ëz≈ë", "02-27": "G√°bor, Edina", "02-28": "Elem√©r", "02-29": "Auguszta",
        "03-01": "Albin", "03-02": "Lujza", "03-03": "Korn√©lia", "03-04": "K√°zm√©r", "03-05": "Adorj√°n, Adri√°n", "03-06": "Leon√≥ra, Inez", "03-07": "Tam√°s", "03-08": "Zolt√°n", "03-09": "Franciska, Fanni", "03-10": "Ildik√≥", "03-11": "Szil√°rd", "03-12": "Gergely", "03-13": "Kriszti√°n, Ajtony", "03-14": "Matild", "03-15": "Krist√≥f", "03-16": "Henrietta", "03-17": "Gertr√∫d, Patrik", "03-18": "S√°ndor, Ede", "03-19": "J√≥zsef, B√°nk", "03-20": "Klaudia", "03-21": "Benedek", "03-22": "Be√°ta, Izolda", "03-23": "Em≈ëke", "03-24": "G√°bor, Karina", "03-25": "Ir√©n, Irisz", "03-26": "Em√°nuel", "03-27": "Hajnalka", "03-28": "Gedeon, Johanna", "03-29": "Auguszta", "03-30": "Zal√°n", "03-31": "√Årp√°d",
        "04-01": "Hug√≥", "04-02": "√Åron", "04-03": "Buda, Rich√°rd", "04-04": "Izidor", "04-05": "Vince", "04-06": "Vilmos, B√≠borka", "04-07": "Herman", "04-08": "D√©nes", "04-09": "Erhard", "04-10": "Zsolt", "04-11": "Le√≥, Szaniszl√≥", "04-12": "Gyula", "04-13": "Ida", "04-14": "Tibor", "04-15": "Anaszt√°zia, Tas", "04-16": "Csongor", "04-17": "Rudolf", "04-18": "Andrea, Ilma", "04-19": "Emma", "04-20": "Tivadar", "04-21": "Konr√°d", "04-22": "Csilla, No√©mi", "04-23": "B√©la, Adalbert", "04-24": "Gy√∂rgy", "04-25": "M√°rk", "04-26": "Ervin", "04-27": "Zita, Mariann", "04-28": "Val√©ria", "04-29": "P√©ter", "04-30": "Katalin, Kitti",
        "05-01": "F√ºl√∂p, Jakab", "05-02": "Zsigmond", "05-03": "T√≠mea, Irma", "05-04": "M√≥nika, Fl√≥ri√°n", "05-05": "Gy√∂rgyi", "05-06": "Ivett, Frida", "05-07": "Gizella", "05-08": "Mih√°ly", "05-09": "Gergely", "05-10": "√Årmin, P√°lma", "05-11": "Ferenc", "05-12": "Pongr√°c", "05-13": "Szerv√°c, Imola", "05-14": "Bonif√°c", "05-15": "Zs√≥fia, Szonja", "05-16": "M√≥zes, Botond", "05-17": "Paszk√°l", "05-18": "Erik, Alexandra", "05-19": "Iv√≥, Mil√°n", "05-20": "Bern√°t, Fel√≠cia", "05-21": "Konstantin", "05-22": "J√∫lia, Rita", "05-23": "Dezs≈ë", "05-24": "Eszter, Eliza", "05-25": "Orb√°n", "05-26": "F√ºl√∂p, Evelin", "05-27": "Hella", "05-28": "Emil, Csan√°d", "05-29": "Magdolna", "05-30": "Janka, Zsanett", "05-31": "Ang√©la, Petronella",
        "06-01": "T√ºnde", "06-02": "K√°rmen, Anita", "06-03": "Klothild", "06-04": "Bulcs√∫", "06-05": "Fatime, Bonif√°c", "06-06": "Norbert, Cintia", "06-07": "R√≥bert", "06-08": "Med√°rd", "06-09": "F√©lix", "06-10": "Margit, Gr√©ta", "06-11": "Barnab√°s", "06-12": "Vill≈ë", "06-13": "Antal, Anett", "06-14": "Vazul", "06-15": "Jol√°n, Vid", "06-16": "Jusztin", "06-17": "Laura, Alida", "06-18": "Arnold, Levente", "06-19": "Gy√°rf√°s", "06-20": "Rafael", "06-21": "Alajos, Leila", "06-22": "Paulina", "06-23": "Zolt√°n", "06-24": "Iv√°n", "06-25": "Vilmos", "06-26": "J√°nos, P√°l", "06-27": "L√°szl√≥", "06-28": "Levente, Ir√©n", "06-29": "P√©ter, P√°l", "06-30": "P√°l",
        "07-01": "Tiham√©r, Annam√°ria", "07-02": "Ott√≥", "07-03": "Korn√©l, Soma", "07-04": "Ulrik", "07-05": "Emese, Sarolta", "07-06": "Csaba", "07-07": "Apoll√≥nia", "07-08": "Ell√°k", "07-09": "Lukr√©cia", "07-10": "Am√°lia", "07-11": "N√≥ra, Lili", "07-12": "Izabella, Dalma", "07-13": "Jen≈ë", "07-14": "√ñrs, Stella", "07-15": "Henrik, Roland", "07-16": "Valter", "07-17": "Endre, Elek", "07-18": "Frigyes", "07-19": "Em√≠lia", "07-20": "Ill√©s", "07-21": "D√°niel, Daniella", "07-22": "Magdolna", "07-23": "Lenke", "07-24": "Kinga, Kincs≈ë", "07-25": "Krist√≥f, Jakab", "07-26": "Anna, Anik√≥", "07-27": "Olga, Lili√°na", "07-28": "Szabolcs", "07-29": "M√°rta, Fl√≥ra", "07-30": "Judit, X√©nia", "07-31": "Oszk√°r",
        "08-01": "Bogl√°rka", "08-02": "Lehel", "08-03": "Hermina", "08-04": "Domonkos, Dominika", "08-05": "Krisztina", "08-06": "Berta, Bettina", "08-07": "Ibolya", "08-08": "L√°szl√≥", "08-09": "Em≈ëd", "08-10": "L≈ërinc", "08-11": "Zsuzsanna, Tiborc", "08-12": "Kl√°ra", "08-13": "Ipoly", "08-14": "Marcell", "08-15": "M√°ria", "08-16": "√Åbrah√°m", "08-17": "J√°cint", "08-18": "Ilona", "08-19": "Huba", "08-20": "Istv√°n", "08-21": "S√°muel, Hajna", "08-22": "Menyh√©rt, Mirjam", "08-23": "Bence", "08-24": "Bertalan", "08-25": "Lajos, Patr√≠cia", "08-26": "Izs√≥", "08-27": "G√°sp√°r", "08-28": "√Ågoston", "08-29": "Beatrix, Erna", "08-30": "R√≥zsa", "08-31": "Erika, Bella",
        "09-01": "Egyed, Egon", "09-02": "Rebeka, Dorina", "09-03": "Hilda", "09-04": "Roz√°lia", "09-05": "Viktor, L≈ërinc", "09-06": "Zakari√°s", "09-07": "Regina", "09-08": "M√°ria, Adrienn", "09-09": "√Åd√°m", "09-10": "Nikolett, Hunor", "09-11": "Teod√≥ra", "09-12": "M√°ria", "09-13": "Korn√©l", "09-14": "Szer√©na, Rox√°na", "09-15": "Enik≈ë, Melitta", "09-16": "Edit", "09-17": "Zs√≥fia", "09-18": "Di√°na", "09-19": "Vilhelmina", "09-20": "Friderika", "09-21": "M√°t√©, Mirella", "09-22": "M√≥ric", "09-23": "Tekla", "09-24": "Gell√©rt, Merc√©desz", "09-25": "Eufrozina, Kende", "09-26": "Jusztina", "09-27": "Adalbert", "09-28": "Vencel", "09-29": "Mih√°ly", "09-30": "Jeromos",
        "10-01": "Malvin", "10-02": "Petra", "10-03": "Helga", "10-04": "Ferenc", "10-05": "Aur√©l", "10-06": "Br√∫n√≥, Ren√°ta", "10-07": "Am√°lia", "10-08": "Kopp√°ny", "10-09": "D√©nes", "10-10": "Gedeon", "10-11": "Brigitta", "10-12": "Miksa", "10-13": "K√°lm√°n, Ede", "10-14": "Hel√©n", "10-15": "Ter√©z", "10-16": "G√°l", "10-17": "Hedvig", "10-18": "Luk√°cs", "10-19": "Pelb√°rt", "10-20": "Vendel", "10-21": "Orsolya", "10-22": "El≈ëd", "10-23": "Gy√∂ngyv√©r", "10-24": "Salamon", "10-25": "Blanka, Bianka", "10-26": "D√∂m√∂t√∂r", "10-27": "Szabina", "10-28": "Simon, J√∫d√°s", "10-29": "N√°rcisz", "10-30": "Alfonz", "10-31": "Farkas",
        "11-01": "Marianna", "11-02": "Achilles", "11-03": "Gy≈ëz≈ë", "11-04": "K√°roly", "11-05": "Imre", "11-06": "L√©n√°rd", "11-07": "Rezs≈ë", "11-08": "Zsombor", "11-09": "Tivadar", "11-10": "R√©ka", "11-11": "M√°rton", "11-12": "J√≥n√°s, Ren√°t√≥", "11-13": "Szilvia", "11-14": "Aliz", "11-15": "Albert, Lip√≥t", "11-16": "√ñd√∂n", "11-17": "Hortenzia, Gerg≈ë", "11-18": "Jen≈ë", "11-19": "Erzs√©bet", "11-20": "Jol√°n", "11-21": "Oliv√©r", "11-22": "Cec√≠lia", "11-23": "Kelemen, Kolos", "11-24": "Emma", "11-25": "Katalin", "11-26": "Vir√°g", "11-27": "Virgil", "11-28": "Stef√°nia", "11-29": "Taksony", "11-30": "Andr√°s, Andor",
        "12-01": "Elza", "12-02": "Melinda, Vivien", "12-03": "Ferenc, Ol√≠via", "12-04": "Borb√°la, Barbara", "12-05": "Vilma", "12-06": "Mikl√≥s", "12-07": "Ambrus", "12-08": "M√°ria", "12-09": "Nat√°lia", "12-10": "Judit", "12-11": "√Årp√°d", "12-12": "Gabriella", "12-13": "Luca, Ot√≠lia", "12-14": "Szil√°rda", "12-15": "Val√©r", "12-16": "Etelka, Aletta", "12-17": "L√°z√°r, Olimpia", "12-18": "Auguszta", "12-19": "Viola", "12-20": "Teofil", "12-21": "Tam√°s", "12-22": "Z√©n√≥", "12-23": "Vikt√≥ria", "12-24": "√Åd√°m, √âva", "12-25": "Eug√©nia", "12-26": "Istv√°n", "12-27": "J√°nos", "12-28": "Kamilla", "12-29": "Tam√°s, Tamara", "12-30": "D√°vid", "12-31": "Szilveszter"
    };

    // --- 1. AUTOMATIKUS √úZENET √âS SZ√çN BET√ñLT√âS (FIREBASE) ---
    async function loadTickerMessage() {
        try {
            const res = await fetch(`${DB_URL}ticker_config.json`);
            if (!res.ok) throw new Error("Hiba");
            const data = await res.json();
            
            // Ha van mentett √ºzenet
            if (data && data.text) {
                const tickerWrap = document.querySelector('.ticker-wrap');
                const tickerItem = document.querySelector('.ticker-item');
                
                if (tickerItem) tickerItem.innerText = data.text;
                
                // Sz√≠nek be√°ll√≠t√°sa (ha vannak mentve)
                if (data.bg && tickerWrap) tickerWrap.style.backgroundColor = data.bg;
                if (data.color && tickerItem) tickerItem.style.color = data.color;
            }
        } catch (e) {
            console.log("Alap√©rtelmezett inf√≥s√°v (Fallback) bet√∂ltve.");
        }
    }

    // Ind√≠t√°skor azonnal lek√©rdezz√ºk
    loadTickerMessage();

    function updateInfo() {
        const now = new Date();
        const napok = ["Vas√°rnap", "H√©tf≈ë", "Kedd", "Szerda", "Cs√ºt√∂rt√∂k", "P√©ntek", "Szombat"];
        const napNeve = napok[now.getDay()];
        const dateStr = now.getFullYear() + ". " + String(now.getMonth() + 1).padStart(2, '0') + ". " + String(now.getDate()).padStart(2, '0') + ". " + napNeve;
        
        document.getElementById('date-text').innerText = dateStr;

        const honapNap = String(now.getMonth() + 1).padStart(2, '0') + "-" + String(now.getDate()).padStart(2, '0');
        const maiNevnap = nevnapok[honapNap] || "---";
        document.getElementById('name-day').innerText = "N√©vnap: " + maiNevnap;

        const dailyKey = "forvia_neww" + now.getFullYear() + (now.getMonth()+1) + now.getDate();
        const cacheBuster = Math.floor(Math.random() * 1000);
        
        const hitUrl = `https://visitor-badge.laobi.icu/badge?page_id=gergoroland_hub_${dailyKey}&left_text=L√°togat√≥k&color=10b981&lcolor=1e293b&style=flat-square&t=${cacheBuster}`;
        document.getElementById('hit-img').src = hitUrl;
    }
    updateInfo();

    function toggleMenu() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const icon = document.getElementById('menuIcon');
        sidebar.classList.toggle('open');
        overlay.classList.toggle('active');
        icon.innerText = sidebar.classList.contains('open') ? '‚úï' : '‚ò∞';
    }

    const moduleNames = {
        '1.html': 'üîç Alkatr√©sz Keres≈ë',
        '2.html': 'üí∞ B√©rkalkul√°tor',
        '3.html': 'üìÖ M≈±szaknapt√°r',
        '4.html': 'üìù Napi Jelent√©s seg√©dlet',
        '5.html': 'üé≠ Maszk keres≈ë',
        '7.html': 'üìä Hiba Anal√≠zis',
        '8.html': 'üë• Szabads√°gok (Staff Pro)',
        '9.html': 'üì∑ Barcode Scan',
        'home':   'üè† Kezd≈ëlap'
    };

    // --- DISCORD QUEUE RENDSZER ---
    let discordQueue = [];
    let isSending = false;

    function sendDiscordLog(actionName, colorCode = 3883766) {
        discordQueue.push({ action: actionName, color: colorCode, time: new Date() });
        processDiscordQueue();
    }

    function processDiscordQueue() {
        if (isSending || discordQueue.length === 0) return;

        isSending = true;
        const item = discordQueue.shift();

        const webhookURL = "https://discord.com/api/webhooks/1455930417155674125/Fo3Kf92QdktExG5mbu65t52MYI5ORFCwIkEnGEen6DboOeyD12zXDsVlsXlMYnhzuGH_";
        const timeString = item.time.toLocaleTimeString('hu-HU');
        
        let ua = navigator.userAgent;
        let platform = "‚ùì Ismeretlen";
        if (/Android/i.test(ua)) platform = "üì± Android";
        else if (/iPhone|iPod/i.test(ua)) platform = "üì± iPhone";
        else if (/iPad/i.test(ua)) platform = "üì± iPad";
        else if (/Windows/i.test(ua)) platform = "üíª Windows PC";
        else if (/Mac/i.test(ua)) platform = "üíª Mac";
        else if (/Linux/i.test(ua)) platform = "üêß Linux";

        const payload = {
            username: "Forvia Hub Logger",
            avatar_url: "https://i.imgur.com/4M34hi2.png",
            content: "@here", // PINGEL√âS MINDENKINEK
            embeds: [{
                title: item.action,
                color: item.color,
                fields: [
                    { name: "‚è∞ Id≈ëpont", value: timeString, inline: true },
                    { name: "üõ†Ô∏è Eszk√∂z", value: platform, inline: true }
                ],
                footer: { text: "Master Shell v2.9 (No Sticky Hover)" }
            }]
        };

        fetch(webhookURL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        })
        .finally(() => {
            setTimeout(() => {
                isSending = false;
                processDiscordQueue(); 
            }, 2000);
        });
    }

    function loadModule(url, autoStart = false, caller = null) {
        if(caller) caller.blur();

        document.getElementById('home-screen').style.display = 'none';
        document.getElementById('content-frame').style.display = 'block';
        
        let finalUrl = url + "?v=" + new Date().getTime();
        
        if(autoStart) {
            finalUrl += "&autostart=true";
        }

        document.getElementById('content-frame').src = finalUrl;
        
        const sidebar = document.getElementById('sidebar');
        if(sidebar.classList.contains('open')) toggleMenu();

        const readableName = moduleNames[url] || "Ismeretlen Modul (" + url + ")";
        sendDiscordLog(`üìÇ Modul Megnyitva: ${readableName} ${autoStart ? '(Gyorsgomb)' : ''}`, 3066993);
    }

    function showHome(caller = null) {
        if(caller) caller.blur(); 

        document.getElementById('home-screen').style.display = 'flex';
        document.getElementById('content-frame').style.display = 'none';
        document.getElementById('content-frame').src = ""; 
        const sidebar = document.getElementById('sidebar');
        if(sidebar.classList.contains('open')) toggleMenu();
        
        sendDiscordLog("üè† Visszat√©r√©s a Kezd≈ëlapra", 10070709);
    }

    // --- HOSSZ√ö NYOM√ÅS LOGIKA ---
    let pressTimer;
    const fab = document.getElementById('menuFab');

    const startPress = (e) => {
        fab.style.transform = "scale(0.8)";
        pressTimer = setTimeout(() => {
            if (navigator.vibrate) navigator.vibrate(50);
            fab.style.transform = "scale(1)";
            loadModule('9.html', true);
            fab.dataset.longPressed = "true";
        }, 800); 
    };

    const endPress = (e) => {
        if (e.type === 'touchend') e.preventDefault();
        clearTimeout(pressTimer);
        fab.style.transform = "scale(1)";
        if (fab.dataset.longPressed !== "true") { toggleMenu(); }
        setTimeout(() => { fab.dataset.longPressed = "false"; }, 200);
    };

    fab.addEventListener('mousedown', startPress);
    fab.addEventListener('touchstart', startPress, {passive: true});
    fab.addEventListener('mouseup', endPress);
    fab.addEventListener('touchend', endPress);
    fab.addEventListener('mouseleave', () => clearTimeout(pressTimer)); 

    // --- TITKOS SZERKESZT≈ê LOGIKA ---
    function openSecureLink(caller) {
        if(caller) caller.blur();
        
        // JELSZ√ì BEK√âR√âS
        let pin = prompt("Adja meg a k√≥dot:");
        
        // 1. ESET: SIMA ADATGENER√ÅL√ì (ADMIN)
        if (pin === "smtforvia2026") {
            window.open("https://gergoroland33-sys.github.io/adatgeneralo/", "_blank");
            sendDiscordLog("üîê ADMIN BEL√âP√âS: Adatgener√°l√≥", 65280);
        } 
        // 2. ESET: TITKOS INF√ìS√ÅV SZERKESZT≈ê
        else if (pin === "infosav2026") {
            // SZ√ñVEG BEK√âR√âSE
            let newText = prompt("√çrd be az √∫j als√≥ cs√≠k sz√∂veget:");
            if (!newText) return; // M√©gse gomb eset√©n kil√©p

            // SZ√çN V√ÅLASZT√ÅSA
            let theme = prompt("V√°lassz sz√≠nt:\n1 = Eredeti (S√∂t√©tk√©k/Arany)\n2 = Forvia K√©k (S√∂t√©tk√©k/K√©k)\n3 = Riaszt√°s (Piros/Feh√©r)\n4 = Egyedi");
            
            let newBg = "rgba(15, 23, 42, 0.95)"; // Default BG
            let newCol = "#fbbf24"; // Default Text

            if (theme == "2") {
                newBg = "rgba(15, 23, 42, 0.95)"; // Eredeti s√∂t√©tk√©k h√°tt√©r
                newCol = "#3b82f6"; // Forvia K√©k bet≈±
            } else if (theme == "3") {
                newBg = "#ef4444"; // Piros
                newCol = "#ffffff"; // Feh√©r
            } else if (theme == "4") {
                newBg = prompt("H√°tt√©r sz√≠n (pl. #000000):", "#000000");
                newCol = prompt("Bet≈± sz√≠n (pl. #ffffff):", "#ffffff");
            }

            // MENT√âS FIREBASE-BE (Sz√∂veg + Sz√≠nek)
            fetch(`${DB_URL}ticker_config.json`, {
                method: 'PUT',
                body: JSON.stringify({ text: newText, bg: newBg, color: newCol })
            }).then(() => {
                alert("‚úÖ √úzenet √©s sz√≠n friss√≠tve!");
                
                // AZONNALI FRISS√çT√âS HELYBEN
                const tickerWrap = document.querySelector('.ticker-wrap');
                const tickerItem = document.querySelector('.ticker-item');
                tickerItem.innerText = newText;
                tickerWrap.style.backgroundColor = newBg;
                tickerItem.style.color = newCol;

                sendDiscordLog(`üì¢ INF√ìS√ÅV FRISS√çTVE: ${newText}`, 16776960);
            }).catch(err => alert("Hiba a ment√©skor!"));
        }
        else if (pin !== null) {
            alert("Hib√°s k√≥d!");
            sendDiscordLog("üö® HIB√ÅS PIN: Adatgener√°l√≥ (Be√≠rva: " + pin + ")", 16711680);
        }
    }

    function openStaffPro(caller) {
        if(caller) caller.blur();
        let pin = prompt("Staff Pro 2026 - Biztons√°gi k√≥d:");
        if (pin === "smtforvia2026") {
            loadModule('8.html');
        } else if (pin !== null) {
            alert("Hib√°s k√≥d! Hozz√°f√©r√©s megtagadva.");
            sendDiscordLog("üö® HIB√ÅS PIN: Szabads√°gok (Be√≠rva: " + pin + ")", 16711680);
        }
    }

    async function shareApp(caller) {
        if(caller) caller.blur();
        sendDiscordLog("üì§ App Megoszt√°s gomb lenyomva", 3066993);

        const shareData = { title: 'Forvia Hub', text: 'Haszn√°ld te is a Forvia SMT applik√°ci√≥t!', url: window.location.href };
        if (navigator.share) { try { await navigator.share(shareData); } catch (err) {} } 
        else { try { await navigator.clipboard.writeText(window.location.href); alert("Link a v√°g√≥lapra m√°solva!"); } catch (err) { console.error('Hiba:', err); } }
    }

    document.addEventListener('gesturestart', function(e) { e.preventDefault(); });

</script>
</body>
</html>
