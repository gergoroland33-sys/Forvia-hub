<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <title>FORVIA HUB - MASTER SHELL</title>

    <link rel="icon" type="image/png" href="icon.png">
    <link rel="apple-touch-icon" href="icon.png">
    
    <meta name="apple-mobile-web-app-title" content="Forvia Hub">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="mobile-web-app-capable" content="yes">
    <style>
        :root {
            --bg: #0b1120; --card: #1e293b; --accent: #3b82f6;
            --text: #f3f4f6; --text-dim: #94a3b8; --border: #334155;
            --success: #10b981; --warning: #f59e0b; --danger: #ef4444;
        }

        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body {
            font-family: 'Inter', system-ui, -apple-system, sans-serif;
            background: #0f172a; color: var(--text);
            margin: 0; height: 100dvh; overflow: hidden;
            display: flex; flex-direction: column;
            padding-top: env(safe-area-inset-top);
            /* Glob√°lis tilt√°s a kijel√∂l√©sre, hogy app-szer≈±bb legyen */
            -webkit-user-select: none; user-select: none;
        }

        #content-frame {
            border: none; width: 100%; height: 100%;
            display: none; 
            background: #0f172a;
        }

        #home-screen {
            flex-grow: 1; display: flex; flex-direction: column;
            align-items: center; justify-content: center; text-align: center;
            /* PRO: M√©lyebb, s√∂t√©tebb h√°tt√©r effektek */
            background: radial-gradient(circle at top right, rgba(59, 130, 246, 0.08), transparent 45%),
            radial-gradient(circle at bottom left, rgba(16, 185, 129, 0.05), transparent 45%), #0b1120;
            padding: 20px; position: relative; width: 100%; height: 100%;
        }

        /* --- PRO GLASS CARD DESIGN --- */
        .glass-card {
            background: rgba(30, 41, 59, 0.4); /* S√∂t√©tebb alappal */
            backdrop-filter: blur(16px); -webkit-backdrop-filter: blur(16px);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-top: 1px solid rgba(255, 255, 255, 0.15); /* F√©nyesebb fels≈ë √©l */
            padding: 40px 30px; border-radius: 24px;
            box-shadow: 0 25px 60px -12px rgba(0, 0, 0, 0.6);
            max-width: 500px; width: 100%; animation: fadeIn 0.8s ease-out;
            position: relative; 
        }

        .share-card-btn {
            position: absolute; top: 20px; right: 20px;
            width: 40px; height: 40px; border-radius: 50%;
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.08);
            color: var(--text-dim); display: flex; align-items: center; justify-content: center;
            cursor: pointer; transition: all 0.3s ease; z-index: 10;
        }
        .share-card-btn:active {
            background: var(--accent); color: white; border-color: var(--accent);
            transform: scale(0.95);
        }

        .share-icon-svg { width: 20px; height: 20px; fill: currentColor; }

        .welcome-title {
            font-size: 2.2rem; font-weight: 800; margin: 0;
            color: white; letter-spacing: -1px; margin-bottom: 5px;
            text-shadow: 0 2px 10px rgba(0,0,0,0.3);
        }
        .highlight-blue { 
            background: linear-gradient(135deg, #60a5fa 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .current-date {
            color: var(--text-dim); font-size: 0.95rem; margin-bottom: 30px; font-weight: 500; line-height: 1.5;
        }
        .nameday-text { color: var(--accent); font-weight: 600; display: block; margin-top: 4px; font-size: 0.85rem; letter-spacing: 0.5px; }

        /* --- PRO CALENDAR WIDGET --- */
        .calendar-box {
            background: linear-gradient(145deg, rgba(15, 23, 42, 0.8) 0%, rgba(30, 41, 59, 0.6) 100%);
            border: 1px solid rgba(255, 255, 255, 0.08);
            border-radius: 16px;
            padding: 18px 22px;
            margin-bottom: 30px;
            text-align: left;
            position: relative;
            overflow: hidden;
            transition: all 0.3s ease;
            border-left: 4px solid var(--accent);
            display: inline-block; width: 100%;
            box-shadow: 0 4px 20px rgba(0,0,0,0.2);
        }

        .cal-header { display: flex; align-items: center; gap: 8px; margin-bottom: 8px; }
        .cal-label { font-size: 0.7rem; text-transform: uppercase; letter-spacing: 1.5px; color: #64748b; font-weight: 700; }
        
        .cal-main-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 4px; }
        .cal-date-text { font-size: 1.4rem; font-weight: 800; color: white; letter-spacing: -0.5px; }
        
        .cal-badge { 
            font-size: 0.75rem; padding: 6px 12px; border-radius: 20px; 
            font-weight: 700; text-transform: uppercase; white-space: nowrap;
            letter-spacing: 0.5px; box-shadow: 0 2px 10px rgba(0,0,0,0.2);
        }
        .cal-event-name { font-size: 0.95rem; color: #94a3b8; font-weight: 500; }
        
        /* St√°tusz sz√≠nek (Pro) */
        .cal-badge.holiday { background: rgba(16, 185, 129, 0.15); color: #34d399; border: 1px solid rgba(16, 185, 129, 0.2); }
        .cal-badge.workday { background: rgba(245, 158, 11, 0.15); color: #fbbf24; border: 1px solid rgba(245, 158, 11, 0.2); }
        
        .calendar-box.type-holiday { border-left-color: #34d399; }
        .calendar-box.type-workday { border-left-color: #fbbf24; }

        .instruction-text {
            font-size: 1rem; line-height: 1.6; color: #cbd5e1; margin-bottom: 30px;
        }
        /* VISSZA√ÅLL√çTVA AZ EREDETI K√âKRE, AL√ÅH√öZ√ÅS N√âLK√úL */
        .instruction-highlight { color: var(--accent); font-weight: 600; }

        .device-info {
            font-size: 0.8rem; color: #64748b;
            border-top: 1px solid rgba(255,255,255,0.08);
            padding-top: 20px; margin-top: 10px;
        }
        .good-luck {
            display: block; margin-top: 5px; color: var(--success); font-weight: 700; text-transform: uppercase; letter-spacing: 1.5px;
        }

        @keyframes fadeIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .ticker-wrap {
            position: fixed; bottom: 0; left: 0; width: 100%; overflow: hidden; height: 36px;
            background-color: rgba(15, 23, 42, 0.95); border-top: 1px solid var(--accent);
            z-index: 1000; backdrop-filter: blur(5px);
            padding-left: 100%; box-sizing: content-box;
        }
        .ticker-move {
            display: inline-block; height: 36px; line-height: 36px; white-space: nowrap;
            padding-right: 100%; box-sizing: content-box;
            animation: ticker 30s linear infinite;
        }
        .ticker-item {
            display: inline-block; padding: 0 2rem; font-size: 0.9rem; color: #fbbf24;
            font-weight: 600; text-transform: uppercase; letter-spacing: 1px;
        }
        @keyframes ticker {
            0% { transform: translate3d(0, 0, 0); }
            100% { transform: translate3d(-100%, 0, 0); }
        }

        .sidebar {
            position: fixed; left: 0; top: 0;
            width: 280px; height: 100%; background: #111827;
            border-right: 1px solid var(--border);
            display: flex; flex-direction: column;
            transform: translateX(-100%);
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 2000;
            padding-top: env(safe-area-inset-top);
        }
        .sidebar.open { transform: translateX(0); box-shadow: 20px 0 50px rgba(0,0,0,0.8); }

        .sidebar-header {
            padding: 25px 20px;
            border-bottom: 1px solid var(--border);
            background: rgba(255,255,255,0.02);
        }
        .sidebar-header h2 {
            font-size: 1.3rem; margin: 0; letter-spacing: 1px; font-weight: 700;
        }

        .nav-list { padding: 20px; flex-grow: 1; overflow-y: auto; }

        .nav-item {
            display: flex; align-items: center; padding: 14px 15px;
            margin-bottom: 8px; border-radius: 12px; text-decoration: none;
            color: var(--text-dim); font-weight: 500; transition: background 0.1s; cursor: pointer;
        }
        .nav-item i { width: 30px; font-style: normal; text-align: center; font-size: 1.2rem; }
        
        @media (hover: hover) {
            .nav-item:hover { background: rgba(59, 130, 246, 0.2); color: white; }
        }
        .nav-item:active { background: var(--accent) !important; color: white !important; transform: scale(0.98); }

        /* --- JAV√çTOTT MEN√ú FAB (EGYSZER≈∞ KLIKK + TILTOTT KIJEL√ñL√âS) --- */
        .menu-fab {
            position: fixed; bottom: 30px; right: 30px;
            width: 60px; height: 60px; background: var(--accent);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 10px 30px rgba(59, 130, 246, 0.5), inset 0 2px 5px rgba(255,255,255,0.2);
            cursor: pointer; z-index: 2147483647; 
            border: 1px solid rgba(255,255,255,0.1);
            transition: transform 0.2s;
            -webkit-user-select: none; 
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
            -webkit-touch-callout: none;
            outline: none;
            -webkit-tap-highlight-color: transparent;
        }
        .menu-fab:active { transform: scale(0.92); box-shadow: 0 5px 15px rgba(59, 130, 246, 0.4); }
        .menu-fab span { font-size: 28px; color: white; line-height: 1; pointer-events: none; }

        .refresh-fab {
            position: fixed; bottom: 110px; right: 37px; 
            width: 45px; height: 45px;
            background: rgba(30, 41, 59, 0.8);
            backdrop-filter: blur(5px);
            border-radius: 50%; display: flex; align-items: center; justify-content: center;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            cursor: pointer; z-index: 2147483647;
            border: 1px solid var(--border);
            transition: all 0.3s;
            -webkit-user-select: none; user-select: none; -webkit-touch-callout: none;
        }
        .refresh-fab:active { transform: rotate(180deg) scale(0.9); }
        .refresh-fab span { font-size: 22px; color: var(--accent); line-height: 1; font-weight: bold; pointer-events: none; }

        .overlay {
            display: none; position: fixed; inset: 0;
            background: rgba(0,0,0,0.8); backdrop-filter: blur(4px); z-index: 1500;
        }
        .overlay.active { display: block; }

        footer { padding: 20px; border-top: 1px solid var(--border); text-align: center; color: #64748b; font-size: 0.75rem; }
    </style>
</head>
<body>

<div class="overlay" id="overlay" onclick="toggleMenu()"></div>

<div id="home-screen">
    <div class="glass-card">
        <div class="share-card-btn" onclick="shareApp(this)" title="App megoszt√°sa">
            <svg class="share-icon-svg" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path d="M18 16.08c-.76 0-1.44.3-1.96.77L8.91 12.7c.05-.23.09-.46.09-.7s-.04-.47-.09-.7l7.05-4.11c.54.5 1.25.81 2.04.81 1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3c0 .24.04.47.09.7L8.04 9.81C7.5 9.31 6.79 9 6 9c-1.66 0-3 1.34-3 3s1.34 3 3 3c.79 0 1.5-.31 2.04-.81l7.12 4.16c-.05.21-.08.43-.08.65 0 1.61 1.31 2.92 2.92 2.92 1.61 0 2.92-1.31 2.92-2.92s-1.31-2.92-2.92-2.92z"/>
            </svg>
        </div>

        <h1 class="welcome-title">√údv <span class="highlight-blue">Felhaszn√°l√≥!</span></h1>
        <div id="display-date" class="current-date">
            <span id="date-text">0000. 00. 00.</span><br>
            <span id="name-day" class="nameday-text">...</span>
        </div>

        <div id="calendar-widget" class="calendar-box">
            <div class="cal-header">
                <span id="cal-type-icon">üìÖ</span> 
                <span id="cal-label" class="cal-label">K√ñVETKEZ≈ê ESEM√âNY</span>
            </div>
            <div class="cal-main-row">
                <span id="cal-date" class="cal-date-text">...</span>
                <span id="cal-days-left" class="cal-badge">...</span>
            </div>
            <div id="cal-name" class="cal-event-name">Bet√∂lt√©s...</div>
        </div>

        <p class="instruction-text">
            Haszn√°ld a jobb oldalon l√©v≈ë <span class="instruction-highlight">men√ºgombot</span><br>
            a haszn√°lat megkezd√©s√©hez.
        </p>

        <div class="device-info">
            Forvia SMT-HUB v2.9.2
            <span class="good-luck">J√≥ munk√°t!</span>
        </div>
    </div>

    <div class="ticker-wrap">
        <div class="ticker-move">
            <div class="ticker-item">üì¢ FORVIA SMT APPLIK√ÅCI√ì INFORM√ÅCI√ìK: √údv√∂zl√ºnk a rendszerben!---üé≠Maszk keres≈ë friss√≠tve:2026.janu√°r.11!---üì∑Androidos telefonon a barcode scanner men√º CHROME b√∂ng√©sz≈ëvel hat√©konyabban m≈±k√∂dik!!</div>
        </div>
    </div>
</div>

<iframe id="content-frame" name="appFrame"></iframe>

<aside class="sidebar" id="sidebar">
    <div class="sidebar-header">
        <h2>
            <span style="color: white;">FORVIA</span>
            <span style="color: var(--accent);">SMT</span>
        </h2>
    </div>

    <nav class="nav-list">
        <div onclick="showHome(this)" class="nav-item"><i>üè†</i> Kezd≈ëlap</div>
        <div onclick="loadModule('1.html', false, this)" class="nav-item"><i>üîç</i> Alkatr√©sz Keres≈ë</div>
        <div onclick="loadModule('2.html', false, this)" class="nav-item"><i>üí∞</i> B√©rkalkul√°tor</div>
        <div onclick="loadModule('3.html', false, this)" class="nav-item"><i>üìÖ</i> M≈±szaknapt√°r</div>
        <div onclick="loadModule('4.html', false, this)" class="nav-item"><i>üìù</i> Napi Jelent√©s seg√©dlet</div>
        <div onclick="loadModule('5.html', false, this)" class="nav-item"><i>üé≠</i> Maszk keres≈ë</div>
        <div onclick="openSecureLink(this)" class="nav-item"><i>‚öôÔ∏è</i> Adatgener√°l√≥ üîê</div>
        <div onclick="loadModule('7.html', false, this)" class="nav-item"><i>üìä</i> Hiba Anal√≠zis</div>
        <div onclick="openStaffPro(this)" class="nav-item"><i>üë•</i> Szabads√°gok 2026 üîê</div>
        <div onclick="loadModule('9.html', false, this)" class="nav-item"><i>üì∑</i> Oper√°tori Barcode Scan </div>
    </nav>

    <footer>Szoftverfejleszt≈ë:<br><strong style="color:white">GERG≈ê ROLAND</strong><br>2026</footer>
</aside>

<div class="refresh-fab" onclick="window.location.reload()">
    <span>‚Üª</span>
</div>

<div class="menu-fab" id="menuFab" onclick="toggleMenu()" oncontextmenu="return false;">
    <span id="menuIcon">‚ò∞</span>
</div>

<script>
    const nevnapok = {
        "01-01": "Alp√°r", "01-02": "√Åbel", "01-03": "Genov√©va, Benj√°min", "01-04": "Titusz, Leona", "01-05": "Simon", "01-06": "Boldizs√°r", "01-07": "Attila, Ram√≥na", "01-08": "Gy√∂ngyv√©r", "01-09": "Marcell", "01-10": "Mel√°nia", "01-11": "√Ågota", "01-12": "Ern≈ë", "01-13": "Veronika", "01-14": "B√≥dog", "01-15": "L√≥r√°nt, Lor√°nd", "01-16": "Guszt√°v", "01-17": "Antal, Ant√≥nia", "01-18": "Piroska", "01-19": "S√°ra, M√°ri√≥", "01-20": "F√°bi√°n, Sebesty√©n", "01-21": "√Ågnes", "01-22": "Vince", "01-23": "Zelma, Rajmund", "01-24": "Tim√≥t", "01-25": "P√°l", "01-26": "Vanda, Paula", "01-27": "Angelika", "01-28": "K√°roly, Karola", "01-29": "Ad√©l", "01-30": "Martina, Gerda", "01-31": "Marcella",
        "02-01": "Ign√°c", "02-02": "Karolina, Aida", "02-03": "Bal√°zs", "02-04": "R√°hel, Csenge", "02-05": "√Ågota, Ingrid", "02-06": "Dorottya, D√≥ra", "02-07": "T√≥dor, R√≥me√≥", "02-08": "Aranka", "02-09": "Abig√©l, Alex", "02-10": "Elvira", "02-11": "Bertold, Marietta", "02-12": "L√≠via, L√≠dia", "02-13": "Ella, Linda", "02-14": "B√°lint, Valentin", "02-15": "Kolos, Georgina", "02-16": "Julianna, Lilla", "02-17": "Don√°t", "02-18": "Bernadett", "02-19": "Zsuzsanna", "02-20": "Alad√°r, √Ålmos", "02-21": "Eleon√≥ra", "02-22": "Gerzson", "02-23": "Alfr√©d", "02-24": "M√°ty√°s", "02-25": "G√©za", "02-26": "Viktor, Gy≈ëz≈ë", "02-27": "G√°bor, Edina", "02-28": "Elem√©r", "02-29": "Auguszta",
        "03-01": "Albin", "03-02": "Lujza", "03-03": "Korn√©lia", "03-04": "K√°zm√©r", "03-05": "Adorj√°n, Adri√°n", "03-06": "Leon√≥ra, Inez", "03-07": "Tam√°s", "03-08": "Zolt√°n", "03-09": "Franciska, Fanni", "03-10": "Ildik√≥", "03-11": "Szil√°rd", "03-12": "Gergely", "03-13": "Kriszti√°n, Ajtony", "03-14": "Matild", "03-15": "Krist√≥f", "03-16": "Henrietta", "03-17": "Gertr√∫d, Patrik", "03-18": "S√°ndor, Ede", "03-19": "J√≥zsef, B√°nk", "03-20": "Klaudia", "03-21": "Benedek", "03-22": "Be√°ta, Izolda", "03-23": "Em≈ëke", "03-24": "G√°bor, Karina", "03-25": "Ir√©n, Irisz", "03-26": "Em√°nuel", "03-27": "Hajnalka", "03-28": "Gedeon, Johanna", "03-29": "Auguszta", "03-30": "Zal√°n", "03-31": "√Årp√°d",
        "04-01": "Hug√≥", "04-02": "√Åron", "04-03": "Buda, Rich√°rd", "04-04": "Izidor", "04-05": "Vince", "04-06": "Vilmos, B√≠borka", "04-07": "Herman", "04-08": "D√©nes", "04-09": "Erhard", "04-10": "Zsolt", "04-11": "Le√≥, Szaniszl√≥", "04-12": "Gyula", "04-13": "Ida", "04-14": "Tibor", "04-15": "Anaszt√°zia, Tas", "04-16": "Csongor", "04-17": "Rudolf", "04-18": "Andrea, Ilma", "04-19": "Emma", "04-20": "Tivadar", "04-21": "Konr√°d", "04-22": "Csilla, No√©mi", "04-23": "B√©la, Adalbert", "04-24": "Gy√∂rgy", "04-25": "M√°rk", "04-26": "Ervin", "04-27": "Zita, Mariann", "04-28": "Val√©ria", "04-29": "P√©ter", "04-30": "Katalin, Kitti",
        "05-01": "F√ºl√∂p, Jakab", "05-02": "Zsigmond", "05-03": "T√≠mea, Irma", "05-04": "M√≥nika, Fl√≥ri√°n", "05-05": "Gy√∂rgyi", "05-06": "Ivett, Frida", "05-07": "Gizella", "05-08": "Mih√°ly", "05-09": "Gergely", "05-10": "√Årmin, P√°lma", "05-11": "Ferenc", "05-12": "Pongr√°c", "05-13": "Szerv√°c, Imola", "05-14": "Bonif√°c", "05-15": "Zs√≥fia, Szonja", "05-16": "M√≥zes, Botond", "05-17": "Paszk√°l", "05-18": "Erik, Alexandra", "05-19": "Iv√≥, Mil√°n", "05-20": "Bern√°t, Fel√≠cia", "05-21": "Konstantin", "05-22": "J√∫lia, Rita", "05-23": "Dezs≈ë", "05-24": "Eszter, Eliza", "05-25": "Orb√°n", "05-26": "F√ºl√∂p, Evelin", "05-27": "Hella", "05-28": "Emil, Csan√°d", "05-29": "Magdolna", "05-30": "Janka, Zsanett", "05-31": "Ang√©la, Petronella",
        "06-01": "T√ºnde", "06-02": "K√°rmen, Anita", "06-03": "Klothild", "06-04": "Bulcs√∫", "06-05": "Fatime, Bonif√°c", "06-06": "Norbert, Cintia", "06-07": "R√≥bert", "06-08": "Med√°rd", "06-09": "F√©lix", "06-10": "Margit, Gr√©ta", "06-11": "Barnab√°s", "06-12": "Vill≈ë", "06-13": "Antal, Anett", "06-14": "Vazul", "06-15": "Jol√°n, Vid", "06-16": "Jusztin", "06-17": "Laura, Alida", "06-18": "Arnold, Levente", "06-19": "Gy√°rf√°s", "06-20": "Rafael", "06-21": "Alajos, Leila", "06-22": "Paulina", "06-23": "Zolt√°n", "06-24": "Iv√°n", "06-25": "Vilmos", "06-26": "J√°nos, P√°l", "06-27": "L√°szl√≥", "06-28": "Levente, Ir√©n", "06-29": "P√©ter, P√°l", "06-30": "P√°l",
        "07-01": "Tiham√©r, Annam√°ria", "07-02": "Ott√≥", "07-03": "Korn√©l, Soma", "07-04": "Ulrik", "07-05": "Emese, Sarolta", "07-06": "Csaba", "07-07": "Apoll√≥nia", "07-08": "Ell√°k", "07-09": "Lukr√©cia", "07-10": "Am√°lia", "07-11": "N√≥ra, Lili", "07-12": "Izabella, Dalma", "07-13": "Jen≈ë", "07-14": "√ñrs, Stella", "07-15": "Henrik, Roland", "07-16": "Valter", "07-17": "Endre, Elek", "07-18": "Frigyes", "07-19": "Em√≠lia", "07-20": "Ill√©s", "07-21": "D√°niel, Daniella", "07-22": "Magdolna", "07-23": "Lenke", "07-24": "Kinga, Kincs≈ë", "07-25": "Krist√≥f, Jakab", "07-26": "Anna, Anik√≥", "07-27": "Olga, Lili√°na", "07-28": "Szabolcs", "07-29": "M√°rta, Fl√≥ra", "07-30": "Judit, X√©nia", "07-31": "Oszk√°r",
        "08-01": "Bogl√°rka", "08-02": "Lehel", "08-03": "Hermina", "08-04": "Domonkos, Dominika", "08-05": "Krisztina", "08-06": "Berta, Bettina", "08-07": "Ibolya", "08-08": "L√°szl√≥", "08-09": "Em≈ëd", "08-10": "L≈ërinc", "08-11": "Zsuzsanna, Tiborc", "08-12": "Kl√°ra", "08-13": "Ipoly", "08-14": "Marcell", "08-15": "M√°ria", "08-16": "√Åbrah√°m", "08-17": "J√°cint", "08-18": "Ilona", "08-19": "Huba", "08-20": "Istv√°n", "08-21": "S√°muel, Hajna", "08-22": "Menyh√©rt, Mirjam", "08-23": "Bence", "08-24": "Bertalan", "08-25": "Lajos, Patr√≠cia", "08-26": "Izs√≥", "08-27": "G√°sp√°r", "08-28": "√Ågoston", "08-29": "Beatrix, Erna", "08-30": "R√≥zsa", "08-31": "Erika, Bella",
        "09-01": "Egyed, Egon", "09-02": "Rebeka, Dorina", "09-03": "Hilda", "09-04": "Roz√°lia", "09-05": "Viktor, L≈ërinc", "09-06": "Zakari√°s", "09-07": "Regina", "09-08": "M√°ria, Adrienn", "09-09": "√Åd√°m", "09-10": "Nikolett, Hunor", "09-11": "Teod√≥ra", "09-12": "M√°ria", "09-13": "Korn√©l", "09-14": "Szer√©na, Rox√°na", "09-15": "Enik≈ë, Melitta", "09-16": "Edit", "09-17": "Zs√≥fia", "09-18": "Di√°na", "09-19": "Vilhelmina", "09-20": "Friderika", "09-21": "M√°t√©, Mirella", "09-22": "M√≥ric", "09-23": "Tekla", "09-24": "Gell√©rt, Merc√©desz", "09-25": "Eufrozina, Kende", "09-26": "Jusztina", "09-27": "Adalbert", "09-28": "Vencel", "09-29": "Mih√°ly", "09-30": "Jeromos",
        "10-01": "Malvin", "10-02": "Petra", "10-03": "Helga", "10-04": "Ferenc", "10-05": "Aur√©l", "10-06": "Br√∫n√≥, Ren√°ta", "10-07": "Am√°lia", "10-08": "Kopp√°ny", "10-09": "D√©nes", "10-10": "Gedeon", "10-11": "Brigitta", "10-12": "Miksa", "10-13": "K√°lm√°n, Ede", "10-14": "Hel√©n", "10-15": "Ter√©z", "10-16": "G√°l", "10-17": "Hedvig", "10-18": "Luk√°cs", "10-19": "Pelb√°rt", "10-20": "Vendel", "10-21": "Orsolya", "10-22": "El≈ëd", "10-23": "Gy√∂ngyv√©r", "10-24": "Salamon", "10-25": "Blanka, Bianka", "10-26": "D√∂m√∂t√∂r", "10-27": "Szabina", "10-28": "Simon, J√∫d√°s", "10-29": "N√°rcisz", "10-30": "Alfonz", "10-31": "Farkas",
        "11-01": "Marianna", "11-02": "Achilles", "11-03": "Gy≈ëz≈ë", "11-04": "K√°roly", "11-05": "Imre", "11-06": "L√©n√°rd", "11-07": "Rezs≈ë", "11-08": "Zsombor", "11-09": "Tivadar", "11-10": "R√©ka", "11-11": "M√°rton", "11-12": "J√≥n√°s, Ren√°t√≥", "11-13": "Szilvia", "11-14": "Aliz", "11-15": "Albert, Lip√≥t", "11-16": "√ñd√∂n", "11-17": "Hortenzia, Gerg≈ë", "11-18": "Jen≈ë", "11-19": "Erzs√©bet", "11-20": "Jol√°n", "11-21": "Oliv√©r", "11-22": "Cec√≠lia", "11-23": "Kelemen, Kolos", "11-24": "Emma", "11-25": "Katalin", "11-26": "Vir√°g", "11-27": "Virgil", "11-28": "Stef√°nia", "11-29": "Taksony", "11-30": "Andr√°s, Andor",
        "12-01": "Elza", "12-02": "Melinda, Vivien", "12-03": "Ferenc, Ol√≠via", "12-04": "Borb√°la, Barbara", "12-05": "Vilma", "12-06": "Mikl√≥s", "12-07": "Ambrus", "12-08": "M√°ria", "12-09": "Nat√°lia", "12-10": "Judit", "12-11": "√Årp√°d", "12-12": "Gabriella", "12-13": "Luca, Ot√≠lia", "12-14": "Szil√°rda", "12-15": "Val√©r", "12-16": "Etelka, Aletta", "12-17": "L√°z√°r, Olimpia", "12-18": "Auguszta", "12-19": "Viola", "12-20": "Teofil", "12-21": "Tam√°s", "12-22": "Z√©n√≥", "12-23": "Vikt√≥ria", "12-24": "√Åd√°m, √âva", "12-25": "Eug√©nia", "12-26": "Istv√°n", "12-27": "J√°nos", "12-28": "Kamilla", "12-29": "Tam√°s, Tamara", "12-30": "D√°vid", "12-31": "Szilveszter"
    };

    // --- 2026 MAGYAR NAPT√ÅR LOGIKA (PRO WIDGET) ---
    const calendarEvents = [
        { date: "2026-03-15", name: "Nemzeti √únnep", type: "holiday" },
        { date: "2026-04-03", name: "Nagyp√©ntek", type: "holiday" },
        { date: "2026-04-05", name: "H√∫sv√©tvas√°rnap", type: "holiday" },
        { date: "2026-04-06", name: "H√∫sv√©th√©tf≈ë", type: "holiday" },
        { date: "2026-05-01", name: "Munka √únnepe", type: "holiday" },
        { date: "2026-05-24", name: "P√ºnk√∂sdvas√°rnap", type: "holiday" },
        { date: "2026-05-25", name: "P√ºnk√∂sdh√©tf≈ë", type: "holiday" },
        { date: "2026-08-20", name: "√Ållamalap√≠t√°s √únnepe", type: "holiday" },
        { date: "2026-10-23", name: "1956-os Forradalom", type: "holiday" },
        { date: "2026-11-01", name: "Mindenszentek", type: "holiday" },
        { date: "2026-12-24", name: "Szenteste", type: "holiday" },
        { date: "2026-12-25", name: "Kar√°csony", type: "holiday" },
        { date: "2026-12-26", name: "Kar√°csony", type: "holiday" }
    ];

    function updateCalendarWidget() {
        const now = new Date();
        now.setHours(0, 0, 0, 0);

        let nextEvent = calendarEvents.find(e => {
            const eventDate = new Date(e.date);
            return eventDate >= now;
        });

        if (!nextEvent) {
            nextEvent = { date: "2027-01-01", name: "√öj√©v", type: "holiday" };
        }

        const eventDate = new Date(nextEvent.date);
        const timeDiff = eventDate - now;
        const daysLeft = Math.ceil(timeDiff / (1000 * 60 * 60 * 24));

        const box = document.getElementById('calendar-widget');
        const label = document.getElementById('cal-label');
        const dateDisplay = document.getElementById('cal-date');
        const daysBadge = document.getElementById('cal-days-left');
        const nameDisplay = document.getElementById('cal-name');
        const icon = document.getElementById('cal-type-icon');

        // Itt m√≥dos√≠tottam: Teljes h√≥napnevek
        const monthNames = ["Janu√°r", "Febru√°r", "M√°rcius", "√Åprilis", "M√°jus", "J√∫nius", "J√∫lius", "Augusztus", "Szeptember", "Okt√≥ber", "November", "December"];
        // Itt m√≥dos√≠tottam: Szebb form√°tum (M√°rcius 15.)
        const formattedDate = `${monthNames[eventDate.getMonth()]} ${eventDate.getDate()}.`;

        dateDisplay.innerText = formattedDate;
        nameDisplay.innerText = nextEvent.name;

        box.className = "calendar-box"; 
        daysBadge.className = "cal-badge"; 

        if (nextEvent.type === 'workday') {
            box.classList.add('type-workday');
            daysBadge.classList.add('workday');
            label.innerText = "K√ñTELEZ≈ê MUNKANAP";
            icon.innerText = "‚ö†Ô∏è";
        } else {
            box.classList.add('type-holiday');
            daysBadge.classList.add('holiday');
            label.innerText = "K√ñVETKEZ≈ê √úNNEP";
            icon.innerText = "üèñÔ∏è";
        }

        if (daysLeft === 0) {
            daysBadge.innerText = "MA!";
        } else if (daysLeft === 1) {
            daysBadge.innerText = "HOLNAP";
        } else {
            daysBadge.innerText = `${daysLeft} NAP`;
        }
    }

    function updateInfo() {
        const now = new Date();
        const napok = ["Vas√°rnap", "H√©tf≈ë", "Kedd", "Szerda", "Cs√ºt√∂rt√∂k", "P√©ntek", "Szombat"];
        const napNeve = napok[now.getDay()];
        const dateStr = now.getFullYear() + ". " + String(now.getMonth() + 1).padStart(2, '0') + ". " + String(now.getDate()).padStart(2, '0') + ". " + napNeve;
        
        document.getElementById('date-text').innerText = dateStr;

        const honapNap = String(now.getMonth() + 1).padStart(2, '0') + "-" + String(now.getDate()).padStart(2, '0');
        const maiNevnap = nevnapok[honapNap] || "---";
        document.getElementById('name-day').innerText = "N√©vnap: " + maiNevnap;

        // √öJ FUNKCI√ì H√çV√ÅSA
        updateCalendarWidget();
    }
    updateInfo();

    function toggleMenu() {
        const sidebar = document.getElementById('sidebar');
        const overlay = document.getElementById('overlay');
        const icon = document.getElementById('menuIcon');
        sidebar.classList.toggle('open');
        overlay.classList.toggle('active');
        icon.innerText = sidebar.classList.contains('open') ? '‚úï' : '‚ò∞';
    }

    const moduleNames = {
        '1.html': 'üîç Alkatr√©sz Keres≈ë',
        '2.html': 'üí∞ B√©rkalkul√°tor',
        '3.html': 'üìÖ M≈±szaknapt√°r',
        '4.html': 'üìù Napi Jelent√©s seg√©dlet',
        '5.html': 'üé≠ Maszk keres≈ë',
        '7.html': 'üìä Hiba Anal√≠zis',
        '8.html': 'üë• Szabads√°gok (Staff Pro)',
        '9.html': 'üì∑ Barcode Scan',
        'home':   'üè† Kezd≈ëlap'
    };

    let discordQueue = [];
    let isSending = false;
    let deviceID = localStorage.getItem('fv_device_id') || Math.floor(Math.random() * 0x10000).toString(16).toUpperCase();
    if (!localStorage.getItem('fv_device_id')) localStorage.setItem('fv_device_id', deviceID);
    
    let totalActivity = parseInt(localStorage.getItem('fv_total_activity') || 0);

    function sendDiscordLog(actionName, colorCode = 3883766) {
        discordQueue.push({ action: actionName, color: colorCode, time: new Date() });
        processDiscordQueue();
    }

    function processDiscordQueue() {
        if (isSending || discordQueue.length === 0) return;

        isSending = true;
        const item = discordQueue.shift();
        const webhookURL = "https://discord.com/api/webhooks/1455930417155674125/Fo3Kf92QdktExG5mbu65t52MYI5ORFCwIkEnGEen6DboOeyD12zXDsVlsXlMYnhzuGH_";
        
        let platform = /Android/i.test(navigator.userAgent) ? "üì± Android" : 
                       (/iPhone|iPad|iPod/i.test(navigator.userAgent) ? "üì± iOS" : "üíª Desktop");

        const payload = {
            username: "Forvia Hub Logger",
            avatar_url: "https://i.imgur.com/4M34hi2.png",
            content: "@here",
            embeds: [{
                title: item.action,
                color: item.color,
                fields: [
                    { name: "‚è∞ Id≈ëpont", value: item.time.toLocaleTimeString('hu-HU'), inline: true },
                    { name: "üõ†Ô∏è Eszk√∂z & ID", value: `${platform} | ID: #${deviceID} | Aktivit√°s: ${totalActivity}`, inline: true }
                ],
                footer: { text: "Master Shell v2.9.1 (√únnepek Verzi√≥)" }
            }]
        };

        // --- BIZTONS√ÅGOS DISCORD K√úLD√âS ---
        fetch(webhookURL, {
            method: 'POST',
            headers: { 'Content-Type': 'application/json' },
            body: JSON.stringify(payload)
        })
        .then(() => {}) // Sikeres k√ºld√©s, nincs teend≈ë
        .catch(() => {}) // T≈±zfal tiltja, elnyelj√ºk a hib√°t, hogy a queue haladhasson
        .finally(() => {
            setTimeout(() => {
                isSending = false;
                processDiscordQueue(); 
            }, 2000);
        });
    }

    function loadModule(url, autoStart = false, caller = null) {
        if(caller) caller.blur();
        totalActivity++;
        localStorage.setItem('fv_total_activity', totalActivity);

        document.getElementById('home-screen').style.display = 'none';
        const frame = document.getElementById('content-frame');
        frame.style.display = 'block';
        frame.src = url + "?v=" + new Date().getTime() + (autoStart ? "&autostart=true" : "");
        
        if(document.getElementById('sidebar').classList.contains('open')) toggleMenu();
        sendDiscordLog(`üìÇ Modul: ${moduleNames[url] || url}`, 3066993);
    }

    function showHome(caller = null) {
        if(caller) caller.blur();
        document.getElementById('home-screen').style.display = 'flex';
        const frame = document.getElementById('content-frame');
        frame.style.display = 'none';
        frame.src = ""; 
        if(document.getElementById('sidebar').classList.contains('open')) toggleMenu();
        sendDiscordLog("üè† Kezd≈ëlap", 10070709);
    }

    // --- FAB LOGIKA KIV√âVE ---
    // Egyszer≈±s√≠tve lett: csak onclick van a HTML-ben

    function openSecureLink(caller) {
        if(caller) caller.blur();
        let pin = prompt("Adatgener√°l√≥ - Biztons√°gi k√≥d:");
        if (pin === "smtforvia2026") {
            window.open("https://gergoroland33-sys.github.io/adatgeneralo/", "_blank");
            sendDiscordLog("üîê ADMIN: Adatgener√°l√≥", 65280);
        } else if (pin !== null) {
            alert("Hib√°s k√≥d!");
            sendDiscordLog("üö® HIB√ÅS PIN: Adatgener√°l√≥", 16711680);
        }
    }

    function openStaffPro(caller) {
        if(caller) caller.blur();
        let pin = prompt("Staff Pro 2026 - Biztons√°gi k√≥d:");
        if (pin === "smtforvia2026") {
            loadModule('8.html');
        } else if (pin !== null) {
            alert("Hib√°s k√≥d!");
            sendDiscordLog("üö® HIB√ÅS PIN: Szabads√°gok", 16711680);
        }
    }

    async function shareApp(caller) {
        if(caller) caller.blur();
        sendDiscordLog("üì§ Megoszt√°s", 3066993);
        const shareData = { title: 'Forvia Hub', text: 'Forvia SMT app', url: window.location.href };
        if (navigator.share) { try { await navigator.share(shareData); } catch (err) {} } 
        else { try { await navigator.clipboard.writeText(window.location.href); alert("Link m√°solva!"); } catch (err) {} }
    }

    document.addEventListener('gesturestart', function(e) { e.preventDefault(); });
</script>
</body>
</html>
