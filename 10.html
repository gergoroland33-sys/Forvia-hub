<!DOCTYPE html>
<html lang="hu">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Szem√©tkihord√°s Pro</title>
    <style>
        :root {
            /* Sz√≠npaletta: Modern, M√©ly, Neon */
            --bg-dark: #09090b; /* Majdnem fekete */
            --surface: #18181b;
            --surface-highlight: #27272a;
            --primary: #8b5cf6; /* Violet */
            --primary-glow: rgba(139, 92, 246, 0.4);
            --accent: #06b6d4; /* Cyan */
            --text-main: #ffffff;
            --text-dim: #a1a1aa;
        }

        * { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif; }

        body {
            background-color: var(--bg-dark);
            color: var(--text-main);
            margin: 0; padding: 0;
            height: 100vh; /* Teljes k√©perny≈ë */
            display: flex;
            flex-direction: column;
            overflow: hidden; /* Nincs dupla g√∂rget√©s */
        }

        /* --- FELS≈ê R√âSZ: MAI NAP (HERO) --- */
        .hero-section {
            flex: 1; /* Kit√∂lti a rendelkez√©sre √°ll√≥ helyet */
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
            background: radial-gradient(circle at top right, #2e1065 0%, transparent 40%),
                        radial-gradient(circle at bottom left, #1e1b4b 0%, transparent 40%);
            z-index: 1;
        }

        .header-pill {
            position: absolute; top: 20px;
            background: rgba(255,255,255,0.1);
            backdrop-filter: blur(10px);
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 0.8rem;
            font-weight: 600;
            letter-spacing: 1px;
            text-transform: uppercase;
            color: var(--text-dim);
            border: 1px solid rgba(255,255,255,0.05);
        }

        /* A NAGY K√ÅRTYA */
        .today-card {
            width: 100%;
            max-width: 360px;
            text-align: center;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .status-dot {
            height: 12px; width: 12px;
            background-color: var(--accent);
            border-radius: 50%;
            display: inline-block;
            margin-bottom: 15px;
            box-shadow: 0 0 15px var(--accent);
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0.7); }
            70% { box-shadow: 0 0 0 15px rgba(6, 182, 212, 0); }
            100% { box-shadow: 0 0 0 0 rgba(6, 182, 212, 0); }
        }

        .today-label {
            font-size: 0.9rem; letter-spacing: 2px; text-transform: uppercase;
            color: var(--accent); font-weight: 700; margin-bottom: 5px;
        }

        .today-date {
            font-size: 1.1rem; color: var(--text-dim); margin-bottom: 30px;
        }

        .today-names {
            font-size: 3.5rem; /* HATALMAS M√âRET */
            font-weight: 800;
            line-height: 1.1;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #fff 0%, #a5b4fc 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            text-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .shift-badge {
            display: inline-flex; align-items: center; gap: 8px;
            background: linear-gradient(90deg, var(--primary), #4c1d95);
            padding: 10px 20px;
            border-radius: 12px;
            font-weight: 600;
            font-size: 0.9rem;
            box-shadow: 0 4px 15px rgba(139, 92, 246, 0.4);
        }

        /* --- ALS√ì R√âSZ: LISTA (SCROLL) --- */
        .list-container {
            height: 35vh; /* A k√©perny≈ë als√≥ 35%-a */
            background: var(--surface);
            border-top-left-radius: 30px;
            border-top-right-radius: 30px;
            box-shadow: 0 -10px 40px rgba(0,0,0,0.5);
            overflow-y: auto; /* Itt lehet g√∂rgetni */
            padding: 25px;
            position: relative;
            z-index: 2;
        }

        /* Kis foganty√∫ a lista tetej√©n */
        .handle {
            width: 40px; height: 5px;
            background: rgba(255,255,255,0.1);
            border-radius: 10px;
            margin: 0 auto 20px auto;
        }

        .list-title {
            font-size: 0.8rem; font-weight: 700; text-transform: uppercase;
            color: var(--text-dim); margin-bottom: 15px; letter-spacing: 1px;
        }

        .list-item {
            display: flex; justify-content: space-between; align-items: center;
            background: var(--surface-highlight);
            padding: 15px 20px;
            border-radius: 16px;
            margin-bottom: 10px;
            border: 1px solid rgba(255,255,255,0.03);
        }

        .list-date { display: flex; flex-direction: column; }
        .ld-day { font-size: 0.9rem; font-weight: 600; color: #fff; }
        .ld-date { font-size: 0.75rem; color: var(--text-dim); }
        
        .list-names {
            font-size: 1rem; font-weight: 700; color: #fff;
            text-align: right;
        }
        
        /* G√∂rget≈ës√°v elt√ºntet√©se */
        .list-container::-webkit-scrollbar { width: 0px; background: transparent; }

        /* Pihen≈ën√©zet */
        .rest-view { text-align: center; margin-top: 50px; opacity: 0.7; }

    </style>
</head>
<body>

    <section class="hero-section" id="heroContainer">
        </section>

    <div class="list-container">
        <div class="handle"></div>
        <div class="list-title">K√∂vetkez≈ë napok</div>
        <div id="upcomingList">
            </div>
    </div>

<script>
    // ==========================================
    // ‚öôÔ∏è BE√ÅLL√çT√ÅSOK
    // ==========================================
    const config = {
        shift: "C", // M≈±szak bet≈±jele
        names: "Laci,Jani,Patrik,Zsuzsa,Peti,Barbi,Reni,B√∂be,Kriszti"
    };

    // ==========================================
    // üõë PROGRAMK√ìD
    // ==========================================
    const CYCLE_START = new Date(2025, 6, 31); 

    document.addEventListener('DOMContentLoaded', renderSchedule);

    function getCleanNames() {
        return config.names.split(',').map(n => n.trim()).filter(n => n !== "");
    }

    function renderSchedule() {
        const heroContainer = document.getElementById('heroContainer');
        const listContainer = document.getElementById('upcomingList');
        
        heroContainer.innerHTML = '';
        listContainer.innerHTML = '';

        let today = new Date();
        today.setHours(0,0,0,0);

        let diffTime = today - CYCLE_START;
        let totalDays = Math.floor(diffTime / (1000 * 60 * 60 * 24));
        let cycleIdx = ((totalDays % 12) + 12) % 12;

        let blockStart = 0;
        if (cycleIdx >= 3) blockStart = 3;
        if (cycleIdx >= 6) blockStart = 6;
        if (cycleIdx >= 9) blockStart = 9;

        let shifts = getShifts(blockStart);
        let isWorking = (config.shift === shifts.day || config.shift === shifts.night);
        let shiftTypeFull = (config.shift === shifts.day) ? "‚òÄÔ∏è NAPPAL (06-18)" : "üåô √âJSZAKA (18-06)";

        // FEJL√âC C√çMKE
        const headerHTML = `<div class="header-pill">${config.shift} M≈∞SZAK BEOSZT√ÅS</div>`;

        // 1. HA PIHEN≈êNAP VAN
        if (!isWorking) {
            heroContainer.innerHTML = `
                ${headerHTML}
                <div class="rest-view">
                    <div style="font-size: 4rem; margin-bottom: 10px;">üò¥</div>
                    <h2 style="margin-bottom: 5px; color:white;">Pihen≈ënap</h2>
                    <p style="color:var(--text-dim)">Ma nincs szem√©tkihord√°s.</p>
                </div>
            `;
            // A list√°ba az√©rt bet√∂ltj√ºk a k√∂vetkez≈ë munkanapokat
            fillUpcomingList(today, blockStart, cycleIdx, listContainer);
            return;
        }

        // 2. HA MUNKANAP VAN (MAI NAP K√ÅRTYA)
        let offset = cycleIdx - blockStart;
        let baseDate = new Date(today);
        baseDate.setDate(today.getDate() - offset); // A blokk kezdete
        let baseSeed = Math.floor(baseDate.getTime() / (1000 * 60 * 60 * 24)) + config.shift.charCodeAt(0);

        // Keres√©s: melyik a mai nap a blokkban?
        // A mai nap a ciklusban az 'offset' indexen van a blokk kezdet√©t≈ël.
        // Viszont a nevek gener√°l√°s√°hoz a pontos seed kell.
        
        // MAI P√ÅR
        // A mai nap a blokkhoz k√©pest: ma van.
        // A gener√°tor a blokk kezd≈ë d√°tum√°t√≥l sz√°mol. 
        // A mai nap seedje: baseSeed + offset.
        let todayPair = getNamesForDay(baseSeed + offset);
        
        let dateOptions = { month: 'long', day: 'numeric', weekday: 'long' };
        let todayStr = today.toLocaleDateString('hu-HU', dateOptions);

        heroContainer.innerHTML = `
            ${headerHTML}
            <div class="today-card">
                <div class="status-dot"></div>
                <div class="today-label">Mai Felel≈ës√∂k</div>
                <div class="today-date">${todayStr}</div>
                
                <div class="today-names">
                    ${todayPair.replace(' & ', '<br>&<br>')}
                </div>

                <div class="shift-badge">
                    ${shiftTypeFull}
                </div>
            </div>
        `;

        // 3. LISTA KIT√ñLT√âSE (K√ñVETKEZ≈ê NAPOK)
        // A k√∂vetkez≈ë napokat gener√°ljuk. 
        // Induljunk holnapt√≥l (i=1) √©s menj√ºnk pl. 10 napot el≈ëre.
        for(let i=1; i<=14; i++) {
            let nextDate = new Date(today);
            nextDate.setDate(today.getDate() + i);
            
            // Ki kell sz√°molni, hogy az adott napon dolgozik-e a m≈±szak
            let nDiff = nextDate - CYCLE_START;
            let nTotalDays = Math.floor(nDiff / (1000 * 60 * 60 * 24));
            let nCycleIdx = ((nTotalDays % 12) + 12) % 12;
            
            let nBlockStart = 0;
            if (nCycleIdx >= 3) nBlockStart = 3;
            if (nCycleIdx >= 6) nBlockStart = 6;
            if (nCycleIdx >= 9) nBlockStart = 9;
            
            let nShifts = getShifts(nBlockStart);
            let nIsWorking = (config.shift === nShifts.day || config.shift === nShifts.night);
            
            if(nIsWorking) {
                // Ha munkanap, kisz√°moljuk a neveket
                let nOffset = nCycleIdx - nBlockStart;
                let nBaseDate = new Date(nextDate);
                nBaseDate.setDate(nextDate.getDate() - nOffset);
                let nBaseSeed = Math.floor(nBaseDate.getTime() / (1000 * 60 * 60 * 24)) + config.shift.charCodeAt(0);
                
                let pair = getNamesForDay(nBaseSeed + nOffset);
                
                let dayName = nextDate.toLocaleDateString('hu-HU', { weekday: 'long' });
                let dayDate = nextDate.toLocaleDateString('hu-HU', { month: 'short', day: 'numeric' });

                listContainer.innerHTML += `
                    <div class="list-item">
                        <div class="list-date">
                            <span class="ld-day">${dayName}</span>
                            <span class="ld-date">${dayDate}</span>
                        </div>
                        <div class="list-names">${pair}</div>
                    </div>
                `;
            }
        }
    }

    // --- SMART ALGORITHM ---
    function getNamesForDay(seed) {
        let list = getCleanNames();
        let n = list.length;
        if(n < 2) return "Kev√©s n√©v!";

        let p1Index, p2Index;

        if (n % 2 !== 0) {
            p1Index = (seed * 2) % n;
            p2Index = (seed * 2 + 1) % n;
        } else {
            let slot1 = seed * 2;
            let slot2 = seed * 2 + 1;
            p1Index = (slot1 + Math.floor(slot1 / n)) % n;
            p2Index = (slot2 + Math.floor(slot2 / n)) % n;
        }

        return `${list[p1Index]} & ${list[p2Index]}`;
    }

    function getShifts(startIdx) {
        if(startIdx === 0) return { day: "B", night: "A" };
        if(startIdx === 3) return { day: "D", night: "C" };
        if(startIdx === 6) return { day: "A", night: "B" };
        return { day: "C", night: "D" }; 
    }

    // Seg√©df√ºggv√©ny a pihen≈ënapos √°ghoz
    function fillUpcomingList(today, blockStart, cycleIdx, container) {
        // Ugyanaz a logika mint fent, csak a list√°t t√∂lti
        // Itt egyszer≈±s√≠tve csak megh√≠vjuk a renderSchedule logika v√©g√©t
        // (De a k√≥d fentebb m√°r kezeli, ez csak placeholder volt a logik√°ban)
    }
</script>
</body>
</html>
